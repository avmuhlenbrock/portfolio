<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Detail</title>
    <link rel="stylesheet" href="avm.css">
    <style>

        body{

            /*overflow: hidden;*/
            padding: 0;
            margin: 0;

        }

    </style>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div class="load"> <img src="pics/load/0.gif" class="loadImg"></div>
<div id="menu" class="black">

    <div class="menu black" id="work">Work <div class="selectLine blackLine"></div></div>  /
    <div class="menu black" id="about">About <div class="selectLine blackLine"></div></div>  /
    <div class="menu black" id="contact">Contact <div class="selectLine blackLine"></div></div>  /


</div>

<div class="detailContainer">

    <div class="detailProject"></div>

    <div class="detailImageContainer">

        <img class="detailImage" src="pics/detail/0/0.jpg">
        <img src="pics/Cube.png" class="button left">
        <img src="pics/Cube.png" class="button right">

        <div class="yearContainer"><div class="yearText">20<div class="fixLine"></div></div><div class="yearText">17<div class="fixLine"></div></div></div>

    </div>


    <div class="detailTextContainer">

        <!--<div class="detailTitle">About</div>-->
        <!--<div id="text1" class="detailText"></div>-->
        <!--<div class="detailTitle">Execution</div>-->
        <!--<div id="text2" class="detailText"></div>-->
        <!--<div class="detailTitle">Programs Used</div>-->
        <!--<div id="text3" class="detailText"></div>-->

    </div>

</div>

<div class="end">
    <br><br>
    <h3 class="endP">detail</h3>
    <h3 class="endP">av.muhlenbrock@gmail.com</h3>
    <h3 class="endP">tel+6468303944</h3>

</div>

<script>

    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    };


    var projectNum = getUrlParameter('projectNum') || 0;
    var detailNum = getUrlParameter('detailNum') || 0;

    $(".detailImage").attr("src","pics/detail/"+projectNum+"/"+detailNum+".jpg");

    $.get('pics/detail/detail.json',function (data) {

        console.log(data);

        $('.detailProject').text(data.detail[projectNum]['Name']);



        appendDetail('About');
        appendDetail('Location');


        var text;

        if(data.detail[projectNum]['Execution']){

            $('.detailTextContainer').append(' <div class="detailTitle">Execution</div>');
            $('.detailTextContainer').append('<div class="detailText" id="Execution"></div>');

            text = '';
            data.detail[projectNum]['Execution'].forEach(function (t) {

                text+= t + "<br>"

            });

            $('#Execution').html(text);

        }

        if(data.detail[projectNum]['Programs Used']){

            $('.detailTextContainer').append(' <div class="detailTitle">Programs Used</div>');
            $('.detailTextContainer').append('<div class="detailText" id="ProgramsUsed"></div>');

            text = '';
            data.detail[projectNum]['Programs Used'].forEach(function (t) {

                text+= t + "<br>"

            });

            $('#ProgramsUsed').html(text);

        }



        appendDetail('Detail');

        function appendDetail(key) {

            if(data.detail[projectNum][key]){


                $('.detailTextContainer').append(' <div class="detailTitle">'+key+'</div>');
                $('.detailTextContainer').append('<div class="detailText">'+data.detail[projectNum][key]+'</div>');

            }

        }

        adapt()


    });

    var rotate;

    $('.left').fadeOut();

    $('.left').mouseenter(function () {

        rotateAnime($(this),-90,0,200)

    });

    $('.left').mouseleave(function () {

        rotateAnime($(this),0,-90,200)

    });

    $('.right').mouseenter(function () {

        rotateAnime($(this),90,0,200)

    });

    $('.right').mouseleave(function () {

        rotateAnime($(this),0,90,200)

    });

    $('.left').click(function () {

        if(lock) {

            console.log('locked');
            return;

        }

        lock = true;

        var detailImage = $(".detailImage");
        detailImage.animate({'opacity':0},500,function () {

            detailImage.attr("src","pics/detail/"+projectNum+"/"+(--detailNum)+".jpg");
            if(detailNum<=0) $('.left').fadeOut();
            lock = false;

        });


        detailImage.one("load", function() {
            detailImage.animate({'opacity':1},500,function () {



            });
        });



    });

    var lock = false;


    $('.right').click(function () {

        if(lock) {

            console.log('locked');
            return;

        }

        lock = true;

        var detailImage = $(".detailImage");
        detailImage.animate({'opacity':0},500,function () {

            detailImage.attr("src","pics/detail/"+projectNum+"/"+(++detailNum)+".jpg");
            if(detailNum>0) $('.left').fadeIn();
            lock = false;

        });


        detailImage.one("load", function() {
            detailImage.animate({'opacity':1},500,function () {



            });
        });



    });

    function rotateAnime(obj,target,current,time) {

        if(rotate)  clearInterval(rotate);
        rotate = setInterval(function () {

            obj.css({'transform' : 'rotate('+(current+= (target-current)/(time/20) )+'deg)'});

            if(Math.abs(current - target)<=0.01) clearInterval(rotate);

        },20)

    }




</script>
<script src="menu.js"></script>
</body>
</html>